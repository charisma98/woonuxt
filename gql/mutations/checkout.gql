#import "~/gql/fragments/SimpleProduct.gql"
#import "~/gql/fragments/VariableProduct.gql"

mutation Checkout($billing: CustomerAddressInput = {}, $metaData: [MetaDataInput] = {key: "", value: ""}) {
  checkout(
    input: {paymentMethod: "stripe", billing: $billing, metaData: $metaData}
  ) {
    result
    redirect
    order {
      needsPayment
      needsProcessing
      status
      databaseId
      orderKey
      subtotal
      total
      subtotal
      totalTax
      shippingTotal
      paymentMethodTitle
      paymentMethod
      date
      subtotal
      customer {
        email
      }
      lineItems {
        nodes {
          quantity
          total
          subtotal
          product {
            name
            slug
            sku
            databaseId
            type
            ...SimpleProduct
            ...VariableProduct
          }
        }
      }
    }
  }
}