#import "~/gql/fragments/SimpleProduct.gql"
#import "~/gql/fragments/VariableProduct.gql"

query getProducts($after: String, $slug: [String]) {
  products(
    first: 99
    after: $after
    where: {categoryIn: $slug, typeNotIn: EXTERNAL, visibility: VISIBLE, minPrice: 0}
  ) {
    nodes {
      name
      onSale
      databaseId
      image {
        sourceUrl
        altText
        title
      }
      productCategories {
        nodes {
          databaseId
          slug
          name
          count
        }
      }
      averageRating
      reviewCount
      slug
      ... SimpleProduct
      ... VariableProduct
    }
  }
}
