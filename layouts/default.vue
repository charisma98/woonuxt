<template>
	<div>
		<div class="text-xs text-white bg-gray-600">
			<div class="container flex justify-between py-1.5">
				<div>NEXT DAY DELIVERY</div>
				<div class="flex gap-4">
					<a href="https://woonuxt.com/soo/"> SIGN IN </a>
					<a class="cursor-pointer" @click="logOut" href="/">LOG OUT</a>
				</div>
			</div>
		</div>
		<Header />
		<transition name="slide">
			<Cart v-if="showCart" class="z-50" />
		</transition>
		<transition name="page" mode="out-in">
			<Nuxt />
		</transition>
		<transition name="page">
			<div v-if="showCart" class="fixed inset-0 bg-black opacity-25" @click="closeCart"></div>
		</transition>
		<Footer />
	</div>
</template>

<script>
export default {
	computed: {
		showCart() {
			return this.$store.state.showCart
		}
	},
	methods: {
		closeCart() {
			this.$store.commit('toggleCart', false)
		},
		async logOut() {
			console.log('Clear all cookies')
			const deleteAllCookies = () => {
				const cookies = document.cookie.split(';')
				for (const cookie of cookies) {
					const eqPos = cookie.indexOf('=')
					const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie
					document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT'
				}
			}
			deleteAllCookies()
		}
	}
}
</script>

<style lang="postcss">
.page-enter-active,
.page-leave-active {
	transition: opacity 300ms ease-in-out;
}
.page-enter,
.page-leave-active {
	opacity: 0;
}
body {
	@apply bg-gray-50;
}

/* Enter and leave animations can use different */
/* durations and timing functions.              */
.slide-leave-active,
.slide-enter-active {
	transition: transform 400ms ease-in-out;
}
.slide-enter,
.slide-leave-to {
	transform: translateX(500px);
}

.big-button {
	@apply rounded inline-flex justify-center items-center text-sm leading-tight uppercase py-3 font-semibold;
	box-shadow: 0 2px 0 #025e47, inset 0 0 8px rgb(255 210 0 / 10%), inset 0 1px 0 #37ff91, inset 0 -1px 0 #06c465;
	background: linear-gradient(to bottom, #37ff91 0%, #06c465 100%) no-repeat 0, linear-gradient(to bottom, #37ff91 0%, #06c465 100%) no-repeat 100%,
		#06994f linear-gradient(to bottom, #25ca85 0%, #057a40 100%) no-repeat;
	background-size: 1px 100%, 1px 100%, cover;
	color: #f9f5e1;
	text-shadow: 0 -1px rgb(0 71 0 / 30%);
	min-width: 200px;
}
</style>
